# Base configuration schema for all training runs
# This file defines the default structure and values

# Experiment management
experiment_id: null  # Auto-generated if null
seeds: [42]  # Default to single seed
results_dir: "experiments"
resume: true

# Core trainer configuration
trainer:
  # Core training parameters
  step_unit: "epoch"
  max_steps: 50

  # Reproducibility settings
  determinism:
    use_cuda_det: true
    enforce_det: false

  # Optimizer configuration
  optimizer:
    name: "Adam"
    lr: 1e-4
    weight_decay: 0.0
    betas: [0.9, 0.999]
    eps: 1e-8

  # Learning rate scheduler (null = constant LR)
  lr_scheduler: null

  # Data loading configuration
  dataloader:
    batch_size: 64
    num_workers: -1  # Auto-detect optimal number
    pin_memory: true
    persistent_workers: true
    shuffle: true
    drop_last: false

  # Progress bar settings
  progress_bar:
    enabled: true
    log_iter_interval: 50

  # Logging configuration
  logging:
    enabled: true
    return_logs: true
    loss_interval_type: "iter"
    loss_iter_interval: 200
    prev_train_losses_log: null
    metrics_interval_type: "iter"
    metrics_iter_interval: 200
    prev_train_metrics_log: null

  # Checkpointing configuration
  checkpoint:
    enabled: false
    return_chkpt: false
    every_n_steps: null
    step_type: "iter"
    save_path: null
    save_dir: null
    save_master_dir: null
    save_viz: false

  # Performance optimization
  torch_compile:
    enabled: false
    mode: "max-autotune"
    backend: "inductor"
    fullgraph: false
    dynamic: false

  # Optional metrics (not implemented yet)
  metrics: null
